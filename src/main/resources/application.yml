spring:
  datasource:
    url: jdbc:postgresql://45.129.186.166:5432/karaoke_db?currentSchema=karaoke&sslmode=disable&socketTimeout=0&tcpKeepAlive=true
    username: karaoke_user
    password: karaoke_password_dev_123
    driver-class-name: org.postgresql.Driver
    hikari:
      data-source-properties:
        tcpKeepAlive: true
      minimum-idle: 1
      maximum-pool-size: 20
      connection-timeout: 20000
      idle-timeout: 300000
      max-lifetime: 1200000
      leak-detection-threshold: 30000
      keepalive-time: 300000
      # Development optimizations
      connection-init-sql: SELECT 1
      auto-commit: false
  application:
    name: karaoke-rating-api

  profiles:
    active: dev  # Change to 'prod' for production

  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB

  jpa:
    open-in-view: false
    show-sql: false  # Override in dev profile
    properties:
      hibernate:
        format_sql: true
        jdbc:
          batch_size: 20
        order_inserts: true
        order_updates: true

# Custom application properties (shared across profiles)
karaoke:
  storage:
    base-path: ./karaoke-storage
    recordings-path: ${karaoke.storage.base-path}/recordings
    reference-tracks-path: ${karaoke.storage.base-path}/reference-tracks

  processing:
    async:
      core-pool-size: 2
      max-pool-size: 5
      queue-capacity: 50

  audio:
    sample-rate: 44100
    max-duration-seconds: 600
    min-duration-seconds: 10

# Storage Configuration (MinIO/S3)
app:
  storage:
    type: ${STORAGE_TYPE:s3}
    environment: ${STORAGE_ENV:dev}
    s3:
      bucket-name: ${S3_BUCKET_NAME:karaoke-app}
      region: ${S3_REGION:us-east-1}
      access-key: ${S3_ACCESS_KEY:challenger_minio}
      secret-key: ${S3_SECRET_KEY:challenger_minio_secure_password_123}
      endpoint: ${S3_ENDPOINT:http://45.129.186.166:9000}
      buckets:
        recordings: ${S3_BUCKET_RECORDINGS:karaoke-recordings}
        reference-tracks: ${S3_BUCKET_REFERENCE:karaoke-reference-tracks}
    minio:
      presigned-url-duration: 60

# Swagger/OpenAPI
springdoc:
  api-docs:
    path: /api-docs
    enabled: true
  swagger-ui:
    path: /swagger-ui.html
    enabled: true
    tags-sorter: alpha
    operations-sorter: alpha
    display-request-duration: true
    doc-expansion: none
  show-actuator: false

server:
  port: 8083  # Different from Challenger (8082)
